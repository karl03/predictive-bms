#ifndef DEFINES_H
#define DEFINES_H

#define serial_timeout 10
#define avg_ms 1000
#define end_voltage 3.5
#define use_display 1
#define sd_logging 0
// Values for INA226 onboard shunt
#define current_offset -1.63992595  // mA
#define current_scale 999.5734377   // mV/10A
// Values for 200A shunt:
// #define current_offset -982.8158579
// #define current_scale 3.7834625
#define A_ms_to_A_h 0.00000027777777777778
// Measure voltages over a very gradual discharge to build a table of (almost) open circuit voltages.
// From these results, build lookup table, mapping percentage of capacity to voltage.
// Next create function to interpolate if between percentage values.
#define MIN_VOLTAGE = 13.3
#define MAX_VOLTAGE = 16.8
const float mah_at_voltage[] = {1541.89, 1541.89, 1541.89, 1541.89, 1541.89, 1541.89, 1541.81, 1541.28, 1541.26, 1540.66, 1540.33, 1540.3, 1539.43, 1539.18, 1539.01, 1538.3, 1537.89, 1537.76, 1537.3, 1536.78, 1536.67, 1536.03, 1535.49, 1535.36, 1534.48, 1534.36, 1533.79, 1533.01, 1533.01, 1532.45, 1531.72, 1531.54, 1531.43, 1530.74, 1530.36, 1529.66, 1529.6, 1529.14, 1528.08, 1528.05, 1526.88, 1526.79, 1525.98, 1525.74, 1524.83, 1524.58, 1524.1, 1523.13, 1523.09, 1522.04, 1521.87, 1521.04, 1520.63, 1519.87, 1519.28, 1518.61, 1518.09, 1517.52, 1517.01, 1516.37, 1515.73, 1515.4, 1514.46, 1513.96, 1512.58, 1512.42, 1511.36, 1511.34, 1510.21, 1510.16, 1509.15, 1508.35, 1507.89, 1506.87, 1506.18, 1505.71, 1504.34, 1503.89, 1503.02, 1501.82, 1501.8, 1500.87, 1500.65, 1499.77, 1498.79, 1498.13, 1497.59, 1496.32, 1495.45, 1494.8, 1493.51, 1493.3, 1492.2, 1491.07, 1489.87, 1489.56, 1488.58, 1487.44, 1486.4, 1485.79, 1484.32, 1483.06, 1481.8, 1481.76, 1480.79, 1479.67, 1478.53, 1477.69, 1476.45, 1475.64, 1474.51, 1473.39, 1472.26, 1471.12, 1469.97, 1468.55, 1467.97, 1466.46, 1465.08, 1463.94, 1462.95, 1461.82, 1460.56, 1459.17, 1457.69, 1456.14, 1454.93, 1453.38, 1451.76, 1450.64, 1449.68, 1447.72, 1446.06, 1444.51, 1442.14, 1441.26, 1438.66, 1436.65, 1434.46, 1431.26, 1428.52, 1424.88, 1419.35, 1411.64, 1401.63, 1387.28, 1365.83, 1337.83, 1324.43, 1317.66, 1311.66, 1305.85, 1300.14, 1294.02, 1286.39, 1278.36, 1268.65, 1258.9, 1248.6, 1237.64, 1228.2, 1219.69, 1211.11, 1200.77, 1190.83, 1180.96, 1169.64, 1156.22, 1142.7, 1128.46, 1114.99, 1101.73, 1091.16, 1081.66, 1072.04, 1061.71, 1051.78, 1042.27, 1031.82, 1021.31, 1011.39, 1001.78, 990.11, 980.54, 969.38, 957.4, 945.15, 931.13, 916.32, 900.46, 887.66, 876.05, 862.34, 850.01, 838.78, 825.87, 813.67, 802.74, 792.4, 781.0, 770.41, 760.0, 750.31, 740.61, 729.22, 720.46, 711.27, 701.76, 693.48, 684.02, 675.44, 666.94, 658.88, 650.66, 641.99, 634.44, 627.36, 619.73, 611.82, 605.66, 598.55, 591.36, 585.06, 578.62, 572.08, 565.97, 559.31, 554.09, 548.23, 542.17, 536.81, 531.1, 525.93, 520.62, 515.09, 509.25, 504.7, 499.45, 493.89, 488.98, 484.54, 479.26, 475.07, 470.35, 465.44, 460.46, 456.06, 451.07, 446.38, 441.58, 436.46, 431.77, 426.28, 420.92, 414.16, 408.74, 402.66, 396.57, 390.97, 384.75, 378.78, 374.26, 368.62, 363.84, 359.02, 354.41, 349.91, 345.39, 341.62, 337.54, 333.63, 330.6, 327.04, 323.81, 320.65, 317.34, 314.85, 311.24, 309.08, 306.58, 303.49, 301.19, 298.98, 296.47, 294.15, 291.17, 288.6, 285.7, 283.08, 281.0, 278.55, 275.48, 272.14, 268.8, 265.66, 261.08, 257.14, 252.11, 245.93, 239.76, 232.53, 224.17, 215.51, 208.77, 202.92, 197.52, 192.7, 187.95, 182.87, 178.67, 173.92, 168.77, 164.04, 159.34, 155.6, 150.92, 146.85, 142.25, 138.03, 133.7, 129.15, 123.89, 120.18, 115.28, 111.71, 107.13, 102.35, 98.33, 93.71, 89.11, 85.1, 80.33, 76.64, 71.7, 68.27, 63.73, 59.03, 54.38, 49.65, 45.95, 41.28, 37.47, 33.42, 29.06, 24.99, 20.47, 16.31, 12.24, 8.01, 4.64};

#endif